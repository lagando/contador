<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Nosso Tempo Juntos ‚ù§Ô∏è</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      padding: 20px;
      background-color: #ffe6e6;
      color: #b30000;
    }
    h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    .contador-box {
      font-size: 1.8em;
      margin-top: 20px;
      padding: 20px;
      background-color: #ffcccc;
      border-radius: 15px;
      display: inline-block;
      min-width: 350px;
      box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
    }
    .contador-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }
    .heart {
      font-size: 2em;
    }
  </style>
</head>
<body>
  <h1>Gabriel e Giulia <br> Nosso amor em N√∫meros desde 14/07/2016 ‚ù§Ô∏è</h1>
  <p class="heart">üíñ Desde o dia que come√ßamos nosso namoro üíñ</p>
  <div class="contador-container">
    <div id="contador" class="contador-box">Carregando...</div>
    ou seja, n√≥s temos:
    <div id="anosDecimal" class="contador-box">Carregando anos...</div>
    <div id="diasTotais" class="contador-box">Carregando dias totais...</div>
    <div id="horasTotais" class="contador-box">Carregando horas totais...</div>
    <div id="minutosTotais" class="contador-box">Carregando minutos totais...</div>
    <div id="segundosTotais" class="contador-box">Carregando segundos totais...</div>
    Feito por: Gabriel
  </div>

  <script>
    function calcularDiferenca() {
      const inicio = new Date("2016-07-14T00:00:00-03:00");
      const agora = new Date(new Date().toLocaleString("en-US", { timeZone: "America/Sao_Paulo" }));

      const diff = agora - inicio;

      let anos = agora.getFullYear() - inicio.getFullYear();
      let meses = agora.getMonth() - inicio.getMonth();
      let dias = agora.getDate() - inicio.getDate();

      if (dias < 0) {
        const ultimoDiaMesAnterior = new Date(agora.getFullYear(), agora.getMonth(), 0).getDate();
        dias = ultimoDiaMesAnterior - inicio.getDate() + agora.getDate();
        meses--;
      }

      if (meses < 0) {
        meses += 12;
        anos--;
      }

      const horas = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutos = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const segundos = Math.floor((diff % (1000 * 60)) / 1000);

      const totalDias = Math.floor(diff / (1000 * 60 * 60 * 24));
      const totalHoras = Math.floor(diff / (1000 * 60 * 60));
      const totalMinutos = Math.floor(diff / (1000 * 60));
      const totalSegundos = Math.floor(diff / 1000);

      // C√°lculo correto dos anos em decimal (com duas casas decimais)
      const aniversarioUltimoAno = new Date(agora.getFullYear(), inicio.getMonth(), inicio.getDate());
      if (agora < aniversarioUltimoAno) {
        aniversarioUltimoAno.setFullYear(aniversarioUltimoAno.getFullYear() - 1);
      }
      const diasDesdeUltimoAniversario = Math.floor((agora - aniversarioUltimoAno) / (1000 * 60 * 60 * 24));
      const diasNoAnoAtual = (agora.getFullYear() % 4 === 0) ? 366 : 365; 
      const anosDecimal = (anos + (diasDesdeUltimoAniversario / diasNoAnoAtual)).toFixed(2);

      return {
        anos,
        meses,
        dias,
        horas,
        minutos,
        segundos,
        totalDias,
        totalHoras,
        totalMinutos,
        totalSegundos,
        anosDecimal
      };
    }

    function atualizarContador() {
      const tempo = calcularDiferenca();

      document.getElementById('contador').innerHTML = `${tempo.anos} anos, ${tempo.meses} meses, ${tempo.dias} dias<br>
                                                        ${tempo.horas} horas, ${tempo.minutos} minutos, ${tempo.segundos} segundos`;
      document.getElementById('anosDecimal').innerHTML = `${tempo.anosDecimal} anos juntos`;
      document.getElementById('diasTotais').innerHTML = `${tempo.totalDias} dias juntos`;
      document.getElementById('horasTotais').innerHTML = `${tempo.totalHoras} horas juntos`;
      document.getElementById('minutosTotais').innerHTML = `${tempo.totalMinutos} minutos juntos`;
      document.getElementById('segundosTotais').innerHTML = `${tempo.totalSegundos} segundos juntos`;
    }

    atualizarContador();
    setInterval(atualizarContador, 1000);
  </script>
</body>
</html>
